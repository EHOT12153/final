Данный репозиторий содержит стенд микросервисного приложения MyShop и полный цикл нагрузочного тестирования с автоматизированным сбором метрик, анализом и генерацией отчётов.

Проект демонстрирует:

методику нагрузочного тестирования (capacity + stability),

работу с метриками уровня клиента и системы,

автоматизацию анализа через CI/CD,

формирование формализованного отчёта по результатам тестов.

Проект используется как портфолио Performance Engineer.

Цели проекта

Определить предельную пропускную способность стенда (capacity test).

Подтвердить устойчивость системы при нагрузке, близкой к максимальной (stability / confirm test).

Зафиксировать SLA и выявить точки деградации.

Автоматизировать сбор, агрегацию и интерпретацию результатов.

Минимизировать ручной анализ и человеческий фактор.

Архитектура стенда
Общая схема

Приложение развернуто с помощью Docker Compose и состоит из следующих уровней:

UI — веб-интерфейс (порт 8088)

API Gateway — единая точка входа, маршрутизация и аутентификация

Discovery (Eureka) — сервис обнаружения

Бизнес-сервисы (Spring Boot):

Auth Service

Catalog Service

Cart Service

Order Service

Payment Service

Inventory Service

Инфраструктура:

PostgreSQL — основное хранилище данных

Redis — кэш / сессии

Kafka + Zookeeper — асинхронные события

Kafka-UI — наблюдение за очередями

Наблюдаемость (Observability):

Prometheus

Grafana (+ Image Renderer)

node-exporter

cAdvisor

Micrometer /actuator/prometheus

Все компоненты объединены в одну Docker-сеть.
Все пользовательские запросы в нагрузочных тестах проходят через API Gateway, без обхода бизнес-логики.

Методика нагрузочного тестирования
Модель нагрузки

Используется closed-model:

контроль concurrency (число одновременных пользователей),

пользовательские сценарии выполняются последовательно в рамках одной сессии,

имитация реального пользовательского поведения.

Пользовательские сценарии (JMeter)

Открытие каталога

Просмотр карточки товара

Добавление товара в корзину

Просмотр корзины

Оформление заказа (checkout)

Сессии сохраняются с помощью HTTP Cookie Manager.

Типы тестов
1. Capacity test — max_search

Цель:
Найти точку насыщения системы и максимальный устойчивый throughput.

Характеристики:

Пошаговый рост concurrency

Плато на каждой ступени (≥ 5 минут)

Фиксация деградации по latency / throughput / ресурсам

Результат:
Определение предельной нагрузки (L0) и характера деградации.

2. Stability / Confirm test — confirm

Цель:
Подтвердить устойчивость системы при нагрузке, близкой к максимальной.

Характеристики:

Фиксированное concurrency (~90% от L0)

Длительный прогон (≥ 60 минут)

Анализ трендов метрик во времени

Результат:
Подтверждение отсутствия накопления ошибок и деградации latency.

SLA и критерии успешности

Latency

P95 ≤ 2000 ms (SLA)

P99 — контроль тренда

Ошибки

Warning: ≤ 1%

Critical: > 5%

Ресурсы

CPU: длительно не выше 80–85%

JVM: отсутствие Full GC-штормов, утечек памяти и потоков

Подробно критерии описаны в МНТ.

Автоматизация и CI/CD
Jenkins пайплайны

Используются два основных job’а:

1. loadtest-max-search

Запуск нагрузочного сценария (JMeter)

Формирование артефактов:

results.jtl

jmeter.log

2. LLM-Analysis

Параметры:

TEST_TYPE (max_search / confirm)

TEST_ID

Шаги:

парсинг JTL,

сбор метрик Prometheus,

выгрузка графиков Grafana (PNG),

сравнение с baseline,

генерация отчёта (DOCX).

Анализ и отчётность
Источники данных

JMeter — клиентские метрики (latency, errors, RPS)

Prometheus — системные и сервисные метрики

Grafana — визуализация и доказательная база

Отчёт

Итоговый отчёт формируется автоматически и содержит:

Executive Summary

Baseline Comparison

External View (JMeter)

Internal View (Prometheus)

Correlation (WHY)

Final Verdict

Recommendations (Action / Evidence / Expected Effect)

Формат: DOCX.

Примечания

Стенд работает в ограниченной среде (один хост, Docker Compose).

Абсолютные значения RPS не равны production, используются для сравнительного анализа.

Проект ориентирован на методику, прозрачность и воспроизводимость.